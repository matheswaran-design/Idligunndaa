<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Heart Catch Game ðŸ’–</title>
<style>
body {
    margin: 0;
    overflow: hidden;
    background: linear-gradient(135deg, #ff9a9e, #fad0c4);
    font-family: 'Comic Sans MS', cursive;
}

#gameContainer {
    position: relative;
    width: 100vw;
    height: 100vh;
}

#player {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 50px;
    touch-action: none;
    transition: transform 0.1s;
}

.heart, .trickHeart {
    position: absolute;
    font-size: 30px;
    animation: fall linear;
}

@keyframes fall {
    0% { transform: translateY(0); }
    100% { transform: translateY(100vh); }
}

#score, #levelDisplay {
    position: absolute;
    top: 20px;
    left: 20px;
    font-size: 22px;
    color: #ff1e56;
}

#levelDisplay {
    left: auto;
    right: 20px;
}

#message {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 2em;
    color: #ff4d6d;
    text-align: center;
    display: none;
}

button {
    padding: 10px 20px;
    font-size: 1em;
    border: none;
    border-radius: 20px;
    background: #ff4d6d;
    color: white;
    cursor: pointer;
    margin-top: 15px;
}
</style>
</head>
<body>

<div id="gameContainer">
    <div id="score">ðŸ’– Hearts: 0</div>
    <div id="levelDisplay">Level: 1</div>
    <div id="player">ðŸ’Œ</div>
    <div id="message"></div>
</div>

<script>
const container = document.getElementById("gameContainer");
const player = document.getElementById("player");
const scoreDisplay = document.getElementById("score");
const levelDisplay = document.getElementById("levelDisplay");
const message = document.getElementById("message");

let score = 0;
let level = 1;
let hearts = [];
let heartsToCatch = 5; // hearts per level
let trickChance = 0.2; // 20% hearts are trick hearts
let heartSpeed = 5; // base speed in seconds

// Move player with touch or mouse
function movePlayer(x) {
    const maxX = window.innerWidth - 50;
    const newX = Math.min(Math.max(x, 25), maxX);
    player.style.left = newX + "px";
}
document.addEventListener("mousemove", (e) => movePlayer(e.clientX));
document.addEventListener("touchmove", (e) => {
    movePlayer(e.touches[0].clientX);
});

// Create a heart
function createHeart() {
    const heart = document.createElement("div");
    const isTrick = Math.random() < trickChance;
    heart.classList.add(isTrick ? "trickHeart" : "heart");
    heart.innerHTML = isTrick ? "ðŸ’”" : "ðŸ’–";
    heart.style.left = Math.random() * (window.innerWidth - 30) + "px";
    heart.style.top = "-50px";
    const duration = heartSpeed + Math.random() * 3;
    heart.style.animationDuration = duration + "s";

    container.appendChild(heart);
    hearts.push(heart);

    setTimeout(() => {
        heart.remove();
        hearts = hearts.filter(h => h !== heart);
        if (!isTrick) createHeart();
    }, duration * 1000);
}

// Spawn hearts per level
function spawnHearts(count) {
    for (let i = 0; i < count; i++) createHeart();
}

// Collision detection
function checkCollision() {
    hearts.forEach((heart) => {
        const heartRect = heart.getBoundingClientRect();
        const playerRect = player.getBoundingClientRect();

        if (!(heartRect.right < playerRect.left ||
            heartRect.left > playerRect.right ||
            heartRect.bottom < playerRect.top ||
            heartRect.top > playerRect.bottom)) {

            if (heart.classList.contains("trickHeart")) {
                // Trick heart disappears
                heart.remove();
                hearts = hearts.filter(h => h !== heart);
                return;
            }

            // Heart caught
            heart.remove();
            hearts = hearts.filter(h => h !== heart);
            score++;
            scoreDisplay.innerHTML = `ðŸ’– Hearts: ${score}`;

            // Floating emojis
            const emoji = document.createElement("div");
            emoji.style.position = "absolute";
            emoji.style.left = heartRect.left + "px";
            emoji.style.top = heartRect.top + "px";
            emoji.style.fontSize = "25px";
            emoji.innerHTML = "âœ¨ðŸ’•";
            container.appendChild(emoji);
            setTimeout(() => emoji.remove(), 1000);

            if (score >= heartsToCatch) {
                nextLevel();
            }
        }
    });
    requestAnimationFrame(checkCollision);
}

// Level up
function nextLevel() {
    hearts.forEach(h => h.remove());
    hearts = [];
    level++;
    levelDisplay.innerHTML = `Level: ${level}`;
    score = 0;
    scoreDisplay.innerHTML = `ðŸ’– Hearts: 0`;
    heartsToCatch += 2;
    heartSpeed = Math.max(2, heartSpeed - 0.5);
    trickChance = Math.min(0.5, trickChance + 0.05);

    // Show celebration
    message.innerHTML = `ðŸŽ‰ Level ${level-1} Complete! ðŸŽ‰<br>
        <img src="https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif" width="200"><br>
        Get ready for next level!`;
    message.style.display = "block";

    setTimeout(() => {
        message.style.display = "none";
        spawnHearts(heartsToCatch);
    }, 3000);
}

// Start game
spawnHearts(heartsToCatch);
checkCollision();
</script>

</body>
</html>
